{% extends "base.html" %}

{% block content %}
  {{post.render() | safe}}
  <div class="post-controls">
    {% if logged_in_user and post.author.name == logged_in_user.name %}
    <form method="post" class="form-horizontal">
      <div class="form-group">
        <button class="btn btn-danger" name="post_action" value="delete_post">Delete</button>
        <button class="btn btn-primary" name="post_action" value="edit_post">Edit</button>
      </div>
    </form>
    {% elif logged_in_user %}
    <form method="post" class="form-horizontal">
      <div class="form-group">
        <button class="btn btn-primary" name="post_action" value="like_post">Like</button>
        <button class="btn btn-primary" name="post_action" value="dislike_post">Dislike</button>
      </div>
    </form>
    {% endif %}
  </div>

  <div class="comments-heading">Comments</div>
  
  <div class="comments">
  	{% for c in post.comments %}
    		{{ c.render() | safe}}
    		<br><br>
  	{% endfor %}
  </div>

  {% if logged_in_user %}
  <form method="post">
    <div class="form-group">
      <label for="comment-text" class="col-md-2 control-label">
	Comment Text
      </label>

      <textarea class="form-control col-md-10"
		rows="10" name="comment_text">{{comment}}</textarea>
    </div>

    <div class="form-group text-center">
      <button class="btn btn-primary" name="post_action" value="comment_post">Comment</button>
    </div>
  </form>
  {% endif %}
{% endblock %}
